# å¾Œç«¯æ¨¡çµ„åŒ–çµæ§‹èªªæ˜Ž

## ðŸ“ ç›®éŒ„çµæ§‹

```
backend/
â”œâ”€â”€ src/                      # æ–°çš„æ¨¡çµ„åŒ–æºç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ database.js      # è³‡æ–™åº«é€£æŽ¥é…ç½®
â”‚   â”œâ”€â”€ middleware/          # ä¸­é–“ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js          # èªè­‰å’ŒæŽˆæ¬Šä¸­é–“ä»¶
â”‚   â”‚   â””â”€â”€ errorHandler.js # éŒ¯èª¤è™•ç†ä¸­é–“ä»¶
â”‚   â”œâ”€â”€ routes/              # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ authRoutes.js    # èªè­‰è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ userRoutes.js    # ç”¨æˆ¶ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ ... (å¾…æ·»åŠ )
â”‚   â”œâ”€â”€ services/            # æ¥­å‹™é‚è¼¯å±¤
â”‚   â”‚   â”œâ”€â”€ authService.js   # èªè­‰æœå‹™
â”‚   â”‚   â”œâ”€â”€ userService.js   # ç”¨æˆ¶æœå‹™
â”‚   â”‚   â””â”€â”€ ... (å¾…æ·»åŠ )
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ logger.js        # æ—¥èªŒå·¥å…·
â”‚   â”œâ”€â”€ app.js               # Express æ‡‰ç”¨é…ç½®
â”‚   â””â”€â”€ server.js            # ä¼ºæœå™¨å•Ÿå‹•å…¥å£
â”œâ”€â”€ migrations/              # è³‡æ–™åº«é·ç§»
â”œâ”€â”€ utils/                   # èˆŠçš„å·¥å…·ç›®éŒ„ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ index.js                 # èˆŠçš„ä¸»æ–‡ä»¶ï¼ˆä¿ç•™ä½œç‚ºåƒè€ƒï¼‰
â””â”€â”€ package.json

## ðŸŽ¯ è¨­è¨ˆåŽŸå‰‡

### 1. åˆ†å±¤æž¶æ§‹
- **è·¯ç”±å±¤** (routes/): è™•ç†HTTPè«‹æ±‚ï¼Œåƒæ•¸é©—è­‰
- **æœå‹™å±¤** (services/): æ¥­å‹™é‚è¼¯è™•ç†
- **é…ç½®å±¤** (config/): æ‡‰ç”¨é…ç½®å’Œè³‡æ–™åº«é€£æŽ¥
- **ä¸­é–“ä»¶å±¤** (middleware/): è«‹æ±‚é è™•ç†ï¼ˆèªè­‰ã€éŒ¯èª¤è™•ç†ï¼‰

### 2. å–®ä¸€è·è²¬
æ¯å€‹æ¨¡çµ„åªè² è²¬ç‰¹å®šåŠŸèƒ½ï¼Œä¾¿æ–¼æ¸¬è©¦å’Œç¶­è­·

### 3. ä¾è³´æ³¨å…¥
æœå‹™å±¤ä¸ç›´æŽ¥ä¾è³´è·¯ç”±ï¼Œå¯ç¨ç«‹æ¸¬è©¦

## ðŸš€ ä½¿ç”¨æ–¹å¼

### é–‹ç™¼æ¨¡å¼
```bash
# ä½¿ç”¨æ–°çš„æ¨¡çµ„åŒ–çµæ§‹
node src/server.js

# æˆ–ä½¿ç”¨ nodemon
nodemon src/server.js
```

### æ›´æ–° package.json
```json
{
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js"
  }
}
```

## âœ… å·²å®Œæˆçš„æ¨¡çµ„

### é…ç½®
- [x] database.js - è³‡æ–™åº«é€£æŽ¥æ± é…ç½®

### ä¸­é–“ä»¶
- [x] auth.js - authenticateToken, authorizeAdmin, authorizeRoles
- [x] errorHandler.js - 404è™•ç†, å…¨å±€éŒ¯èª¤è™•ç†

### æœå‹™
- [x] authService.js - ç™»å…¥, Tokené©—è­‰å’Œåˆ·æ–°
- [x] userService.js - ç”¨æˆ¶CRUDæ“ä½œ

### è·¯ç”±
- [x] authRoutes.js - POST /api/auth/login, /api/auth/refresh
- [x] userRoutes.js - ç”¨æˆ¶ç®¡ç†å®Œæ•´CRUD

## ðŸ“‹ å¾…å®Œæˆçš„æ¨¡çµ„

### æœå‹™å±¤
- [ ] orderService.js - è¨‚å–®æ¥­å‹™é‚è¼¯
- [ ] taskService.js - ä»»å‹™æ¥­å‹™é‚è¼¯  
- [ ] reportService.js - å ±è¡¨ç”Ÿæˆ
- [ ] operationLogService.js - æ“ä½œæ—¥èªŒ

### è·¯ç”±å±¤
- [ ] orderRoutes.js - è¨‚å–®è·¯ç”±
- [ ] taskRoutes.js - ä»»å‹™è·¯ç”±
- [ ] reportRoutes.js - å ±è¡¨è·¯ç”±
- [ ] operationLogRoutes.js - æ“ä½œæ—¥èªŒè·¯ç”±

## ðŸ”§ é·ç§»æ­¥é©Ÿ

1. âœ… å‰µå»ºåŸºç¤Žç›®éŒ„çµæ§‹
2. âœ… å¯¦ç¾æ ¸å¿ƒä¸­é–“ä»¶ï¼ˆèªè­‰ã€éŒ¯èª¤è™•ç†ï¼‰
3. âœ… å¯¦ç¾èªè­‰å’Œç”¨æˆ¶ç®¡ç†æ¨¡çµ„
4. â³ é€æ­¥é·ç§»è¨‚å–®ç›¸é—œåŠŸèƒ½
5. â³ é·ç§»å ±è¡¨å’Œæ—¥èªŒåŠŸèƒ½
6. â³ æ›´æ–° package.json å•Ÿå‹•è…³æœ¬
7. â³ å…¨é¢æ¸¬è©¦
8. â³ éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒ

## ðŸ“ æ³¨æ„äº‹é …

- èˆŠçš„ `index.js` ä¿ç•™ä½œç‚ºåƒè€ƒï¼Œä¸æœƒè¢«åˆªé™¤
- æ–°èˆŠç³»çµ±å¯ä»¥ä¸¦å­˜ï¼Œé€æ­¥é·ç§»
- æ‰€æœ‰æ–°ä»£ç¢¼éƒ½åŒ…å«è©³ç´°çš„è¨»é‡‹å’Œæ—¥èªŒ
- ä½¿ç”¨ç’°å¢ƒè®Šæ•¸é…ç½®ï¼Œæ”¯æŒé–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒ

## ðŸ§ª æ¸¬è©¦

æ¨¡çµ„åŒ–å¾Œçš„ä»£ç¢¼æ›´å®¹æ˜“ç·¨å¯«å–®å…ƒæ¸¬è©¦ï¼š

```javascript
// ç¯„ä¾‹ï¼šæ¸¬è©¦ authService
const authService = require('../src/services/authService');

describe('AuthService', () => {
  test('should login successfully with valid credentials', async () => {
    const result = await authService.login('admin', 'password');
    expect(result).toHaveProperty('token');
    expect(result).toHaveProperty('user');
  });
});
```
